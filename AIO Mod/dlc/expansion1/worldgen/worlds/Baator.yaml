# ================================================================================================================================ 
# - Baator world gen 
# ================================================================================================================================
# Baator Shadowfel  :   32c - Mud, Dirt, CrushedRock, SandStone, Sand, AluminumOre, CopperOre, PhosphorusLake, Hydrogen
# Baator Avernus    :   22c - Mud, Dirt, CrushedRock, SandStone, Sand, AluminumOre, CopperOre, PhosphorusLake, Hydrogen
# Forest warm       :   32c - Dirt, IgneousRock, AluminumOre, Water, Arbor Tree, Hexalent, meal worm, MirthLeaf, Shinebug, Pip
# Baator Minauros   :   48c - Mud, PolutedDirt, SedimentaryRock, SlimeMold, Algae, Coal, Corium, Polluted Water, Swamp Chard, Arbor Tree, Pacu, TropicalPacu, Morb, 
# Baator Madadomini :  200c - Sandstone, Sand, AluminumOre, SedimentaryRock, Lime, Regolith, MaficRock, Pyrite, Helium, JumpingJoya, Sporchid, MoltenSlickers, 
# Baator Phlegethos : 2200c - Magama, Obsidian, Abyssalite RefinedCarbon, Sulphur, Diamond
# Baator Cania      : -260c - Snow, Bleachstone, PolutedIce, BrineIce, Ice, Sand, Cobaltite, Poluted Oxygen, Chlorine
# Baator Malbolge   :  230c - Dirt, Clay, Fossil, SedimentaryRock, Obsidian, Electrum, Wolframite, Mercury, Steam, Sour Gas
# Baator Stygia     :  -20c - CrushedIce, Granite, Ice, Snow, Salt, Wolframite, Copper, SaltWater, Brine, Hydrogen, PokeShell, Waterweeds seeds
# Baator Dis        :   45c - Sandstone, Iron,  Urainium, Corium, syngas
# Baator Nessus     :  100c - Lime, MaficRock, SandStone, Sand, SedimentaryRock, Phosphorite, Poluted Oxygen
# ================================================================================================================================
name: STRINGS.WORLDS.BAATOR.NAME
description: STRINGS.WORLDS.BAATOR.DESCRIPTION
#nameTable: TERRA
asteroidIcon: asteroid_baator_kanim
disableWorldTraits: true

#All biome placementment rules are based on size 256x416
worldsize:
  X: 256
  Y: 416
layoutMethod: PowerTree

fixedTraits:
  - sunlightMed
  - cosmicRadiatioVeryHigh

seasons:
  - ClassicStyleStartMeteorShowers
  - MiniRadioactiveOceanMeteorShowers
  - ClassicStyleWarpMeteorShowers
#  - SpacedOutStyleStartMeteorShowers
#  - SpacedOutStyleWarpMeteorShowers

defaultsOverrides:
  data:
    DrawWorldBorder: true
    DrawWorldBorderOverVacuum: false
    WorldBorderThickness: 4
    WorldBorderRange: 2
# == Errata == : These settings cause more chance of Worldgen failures to occur, use subworld settings by default
#    OverworldDensityMin: 5
#    OverworldDensityMax: 21
#    OverworldAvoidRadius: 5
#    OverworldSampleBehaviour: PoissonDisk
#    OverworldMinNodes: 1

startSubworldName: subworlds/baator/Baator_AvernusStart     #1.1
startingBaseTemplate: bases/Baator_Base
startingBasePositionHorizontal:
  min: 0.5
  max: 0.5
startingBasePositionVertical:
  min: 0.45
  max: 0.45

# List all the zone files to load
subworldFiles:
#  - name: subworlds/sandstone/SandstoneStart
#  - name: subworlds/sandstone/Sandstone
  - name: subworlds/space/Space
  - name: subworlds/baator/Baator_VastSpace
  - name: subworlds/baator/Baator_SurfaceCrags
    weight: 1.5
  - name: subworlds/baator/Baator_SubSurfaceCrags
#  - name: subworlds/baator/Baator_Big_Rust
  - name: subworlds/baator/Baator_Shadowfel                 #0
    minCount: 1
  - name: subworlds/baator/Baator_AvernusStart              #1.1
  - name: subworlds/baator/Baator_AvernusMini               #1.2
#    minCount: 3
  - name: subworlds/baator/Baator_Avernus                   #1.3
#    minCount: 1
  - name: subworlds/baator/Baator_Dis                       #2
#    minCount: 1
  - name: subworlds/baator/Baator_Minauros                  #3
#    minCount: 2
    weight: 1.5
  - name: subworlds/baator/Baator_PhlegethosMini            #4.1
    minCount: 1
    maxCount: 2
  - name: subworlds/baator/Baator_Phlegethos                #4.2
 #   minCount: 1
  - name: subworlds/baator/Baator_Stygia                    #5
#    minCount: 1
  - name: subworlds/baator/Baator_MalbolgeMini              #6.1
  - name: subworlds/baator/Baator_Malbolge                  #6.2
#    minCount: 1
    weight: 1.5
  - name: subworlds/baator/Baator_Maladomini                #7
#    minCount: 1
    weight: 1.5
  - name: subworlds/baator/Baator_CaniaMini                 #8.1
  - name: subworlds/baator/Baator_Cania                     #8.2
#    minCount: 1
  - name: subworlds/baator/Baator_Nessus                    #9
#    minCount: 1
  - name: subworlds/baator/Baator_LavaField                 #10.1
#    minCount: 1
  - name: subworlds/baator/Baator_LavaTube                  #10.2
#    minCount: 4

#Worldgen is designed to create some lavatubes around the lower sides of the map
#this has to be done by order using Replace as unionwith doesnt give the desired effects
#Unionwith with only works on a random number of biomes within the range selected.
#within each biome pdwidth will cause the the biome to be placed over several layers.

#So in order to get the desired order. this is how biomes are placed,
# Default: Avernus
# Depth-1: Malbolge
# Edge:    LavaTube
# Depth:   LavaField/Phlegethos
# Ring2-3: 

#         |<------- Lowest Priority                           Highest Priority ------->| 
#Order is: Space, Malbolge, LavaTube, Phlegethos, Central Rings, Cania/Stygia, SurfaceCrags, Space
unknownCellsAllowedSubworlds: 
  # ================================ 
  # - Default
  # ================================ 
  - tagcommand: Default
    command: Replace
    subworldNames:
      - subworlds/baator/Baator_Avernus
#       - subworlds/space/Space
  # ================================ 
  # - Low priority Biomes - Bottom
  # ================================
  # ================================ 
  # - Medium priority Biomes - Bottom
  # ================================
  # At Bottom
  - tagcommand: AtTag
    tag: AtDepths
    command: Replace
    subworldNames:
      - subworlds/baator/Baator_Phlegethos                  #4
      - subworlds/baator/Baator_LavaField                   #10.1
  # At Bottom -1
  - tagcommand: DistanceFromTag
    tag: AtDepths
    minDistance: 1
    maxDistance: 1
    command: Replace
    subworldNames:
      - subworlds/baator/Baator_PhlegethosMini              #4.1
      - subworlds/baator/Baator_MalbolgeMini                #6.1
  - tagcommand: DistanceFromTag
    tag: AtDepths
    minDistance: 2
    maxDistance: 2
    command: Replace
    subworldNames:
      - subworlds/baator/Baator_MalbolgeMini                #6.1
 #     - subworlds/baator/Baator_Maladomini                  #7

  - tagcommand: DistanceFromTag
    tag: AtDepths
    minDistance: 3
    maxDistance: 4
    command: Replace
    subworldNames:
      - subworlds/baator/Baator_Dis                         #2
      - subworlds/baator/Baator_Maladomini                  #7
      - subworlds/baator/Baator_Nessus                      #9
  # ================================ 
  # - High priority Biomes - Lower Edge 
  # ================================ 
  # At Edge
  - tagcommand: DistanceFromTag
    tag: AtEdge
    minDistance: 0
    maxDistance: 1
    command: Replace
    subworldNames:
      - subworlds/baator/Baator_LavaTube                    #10.2
#  # At Edge near Bottom : Union with will ensure lavaTubes are continuous
#  # However these union rules dont work as expected.  biomes end up all over the place
#  - tagcommand: DistanceFromTag
#    tag: AtEdge
#    minDistance: 0
#    maxDistance: 0
#    command: UnionWith
#    subworldNames:
#      - subworlds/baator/Baator_LavaTube                   #10.2
#  - tagcommand: DistanceFromTag
#    tag: AtEdge
#    minDistance: 1
#    maxDistance: 5
#    command: ExceptWith
#    subworldNames:
#      - subworlds/baator/Baator_LavaTube                   #10.2

 # Erase lavatube at mid-level edges
#  - tagcommand: DistanceFromTag
#    tag: AtSurface
#    minDistance: 5
#    maxDistance: 6
#    command: Replace
#    subworldNames:
#       - subworlds/space/Space

  # ================================ 
  # - Medium Biomes - Outter Rings
  # ================================ 
  # Biome is to be on top of Lava edges, but behind Space, Surface and Ice layers
  # Ring-2
  - tagcommand: DistanceFromTag
    tag: AtStart
    minDistance: 2
    maxDistance: 2
    command: Replace
    subworldNames:
      - subworlds/baator/Baator_Shadowfel                   #0
      - subworlds/baator/Baator_AvernusMini                 #1.2
      - subworlds/baator/Baator_Dis                         #2
      - subworlds/baator/Baator_Minauros                    #3
#      - subworlds/baator/Baator_Stygia                      #5
      - subworlds/baator/Baator_Nessus                      #9
  # Ring-3
  - tagcommand: DistanceFromTag
    tag: AtStart
    minDistance: 3
    maxDistance: 3
    command: Replace
    subworldNames:
#      - subworlds/baator/Baator_Shadowfel                  #0
      - subworlds/baator/Baator_Dis                         #2
      - subworlds/baator/Baator_Minauros                    #3
      - subworlds/baator/Baator_Nessus                      #9
      - subworlds/baator/Baator_Maladomini                  #7

  # ================================ 
  # - High priority Biomes - Surface
  # ================================ 
  # At Surface
  - tagcommand: DistanceFromTag
    tag: AtSurface
    minDistance: 0
    maxDistance: 1
    command: Replace
    subworldNames:
      - subworlds/space/Space
#      - subworlds/baator/Baator_VastSpace
  - tagcommand: DistanceFromTag
    tag: AtSurface
    minDistance: 2
    maxDistance: 2
    command: Replace
    subworldNames:
       - subworlds/baator/Baator_SurfaceCrags
  - tagcommand: DistanceFromTag
    tag: AtSurface
    minDistance: 3
    maxDistance: 3
    command: Replace
    subworldNames:
      - subworlds/baator/Baator_SubSurfaceCrags
      - subworlds/baator/Baator_CaniaMini                    #8
  - tagcommand: DistanceFromTag
    tag: AtSurface
    minDistance: 4
    maxDistance: 4
    command: Replace
    subworldNames:
      - subworlds/baator/Baator_Cania                       #8.2
      - subworlds/baator/Baator_Stygia                      #5
  - tagcommand: DistanceFromTag
    tag: AtSurface
    minDistance: 5
    maxDistance: 5
    command: Replace
    subworldNames:
      - subworlds/baator/Baator_Shadowfel                   #0
      - subworlds/baator/Baator_AvernusMini                 #1.3
      - subworlds/baator/Baator_Stygia                      #5
  # ================================ 
  # - High priority Biomes - Inner Rings
  # ================================ 
  # this layer is comes after the bottom layer 
  # CoreRing-1
  - tagcommand: DistanceFromTag
    tag: AtStart
    minDistance: 1
    maxDistance: 1
    command: Replace
    subworldNames:
      - subworlds/baator/Baator_AvernusMini                 #1.2 
      - subworlds/baator/Baator_Avernus                     #1.3
      - subworlds/baator/Baator_Shadowfel                   #0
#      - subworlds/baator/Baator_Minauros                    #3

worldTemplateRules:
  # ================================ 
  # - Points of interest - Warp
  # ================================ 
  # Gravitas
  - names:
    - expansion1::poi/warp/sender
    - expansion1::poi/warp/receiver
    - expansion1::poi/warp/teleporter
    listRule: GuaranteeAll
    priority: 500
    allowDuplicates: false
    allowedCellsFilter:
      - command: Replace
        tagcommand: DistanceFromTag
        tag: AtStart
        minDistance: 2
        maxDistance: 3
      - command: ExceptWith
        tagcommand: DistanceFromTag
        tag: AtSurface
        minDistance: 0
        maxDistance: 2
  # ================================ 
  # - Points of interest - Ruines
  # ================================ 
  # StartZone
  - names:
    - poi/Baator_Food
    - poi/Baator_Fridge
    listRule: TryAll
    priority: 490
    useRelaxedFiltering: true
    allowExtremeTemperatureOverlap: true
    allowDuplicates: false
    allowedCellsFilter:
      - command: Replace
        tagcommand: DistanceFromTag
        tag: AtStart
        minDistance: 0
        maxDistance: 1
      - command: ExceptWith
        subworldNames:
          - subworlds/baator/Baator_Stygia
          - subworlds/baator/Baator_Cania
  - names:
    - poi/Baator_Lounge
    - poi/Baator_Changingroom
    - poi/Baator_Tearoom
    listRule: TryAll
    priority: 480
    useRelaxedFiltering: true
    allowExtremeTemperatureOverlap: true
    allowDuplicates: false
    allowedCellsFilter:
      - command: Replace
        subworldNames:
          - subworlds/baator/Baator_Avernus
  - names:
    - poi/Baator_Breakroom
    - poi/Baator_Extractionroom
    - poi/Baator_Spacejunk1
    - poi/Baator_Spacejunk2
    listRule: TryAll
    priority: 470
    allowExtremeTemperatureOverlap: true
    allowDuplicates: false
    allowedCellsFilter:
      - command: Replace
        subworldNames:
          - subworlds/baator/Baator_SurfaceCrags
  - names:
    - poi/Baator_Weedfarm
    - poi/Baator_Stygiaheatsink
    listRule: TryAll
    priority: 460
    allowExtremeTemperatureOverlap: true
    allowDuplicates: false
    allowedCellsFilter:
      - command: Replace
        subworldNames:
          - subworlds/baator/Baator_Stygia
  - names:
    - poi/Baator_Caniaheatsink
    - poi/Baator_Caniacryofarm
    listRule: TryAll
    priority: 450
    allowExtremeTemperatureOverlap: true
    allowDuplicates: false
    allowedCellsFilter:
      - command: Replace
        subworldNames:
          - subworlds/baator/Baator_Cania
  - names:
    - poi/Baator_Nessusoozyoil
    listRule: TryOne
    priority: 445
    allowExtremeTemperatureOverlap: true
    allowDuplicates: false
    allowedCellsFilter:
      - command: Replace
        subworldNames:
          - subworlds/baator/Baator_Nessus
  - names:
    - poi/Baator_Nessuslimonites1
    - poi/Baator_Nessuslimonites2
    - poi/Baator_Nessuslimonites3
    - poi/Baator_Nessuslimonites4
    - poi/Baator_Nessuslimonites5
    listRule: GuaranteeSomeTryMore
    priority: 440
    someCount: 1
    moreCount: 4
    allowExtremeTemperatureOverlap: false
    allowDuplicates: true
    allowedCellsFilter:
      - command: Replace
        subworldNames:
          - subworlds/baator/Baator_Nessus
  - names:
    - poi/frozen/lab_basement
    - poi/frozen/lab_splitroom
    - expansion1::poi/frozen/lab_basement_small
    - expansion1::poi/frozen/frag_neuro
    listRule: TryAll
    priority: 430
    allowExtremeTemperatureOverlap: true
    allowDuplicates: false
    allowedCellsFilter:
      - command: Replace
        subworldNames:
          - subworlds/baator/Baator_Stygia
          - subworlds/baator/Baator_Cania
  - names:
    - poi/Baator_Phlegethosmicroblackhole1
    - poi/Baator_Phlegethosmicroblackhole2
    - poi/Baator_Phlegethosmicroblackhole3
    - poi/Baator_Phlegethosmicroblackhole4
    listRule: GuaranteeOne
    priority: 420
    allowExtremeTemperatureOverlap: false
    allowedCellsFilter:
      - command: Replace
        subworldNames:
          - subworlds/baator/Baator_Phlegethos
  - names:
    - poi/Baator_Avernusgasbomb1
    - poi/Baator_Avernusgasbomb2
    - poi/Baator_Avernusgasbomb3
    listRule: TrySome
    someCount: 7
    priority: 410
    allowDuplicates: true
    allowExtremeTemperatureOverlap: false
    allowedCellsFilter:
      - command: Replace
        tagcommand: DistanceFromTag
        tag: AtStart
        minDistance: 0
        maxDistance: 2
  # ================================ 
  # - Points of interest - Geysers
  # ================================ 
  # Note: Oil Reserviors and Volcanos are handled in
  #       Subworld file, as these are Gauranteed biomes
  # Note: Subworlds cannot use GuaranteeAll Rule.
  #
  # Renewable Water Source 
  # ---------------------------
  - names:
    - poi/Baator_Geyser_Natoriumusen
    - poi/Baator_Geyser_Brinypool
    listRule: TryAll
    priority: 400
    allowedCellsFilter:
      - command: Replace
        subworldNames:
          - subworlds/baator/Baator_Stygia
      - command: IntersectWith
        tagcommand: DistanceFromTag
        tag: AtStart
        minDistance: 1
        maxDistance: 4
  - names:
    - poi/Baator_Geyser_Rancidwater
    - geysers/chlorine_gas
    listRule: TryAll
    priority: 390
    allowedCellsFilter:
      - command: Replace
        subworldNames:
          - subworlds/baator/Baator_Minauros
      - command: IntersectWith
        tagcommand: DistanceFromTag
        tag: AtStart
        minDistance: 1
        maxDistance: 5
  # Hot Water Source 
  # ---------------------------
  - names:
    - geysers/hot_steam
    - geysers/steam
    listRule: TryAll
    priority: 380
    allowedCellsFilter:
      - command: Replace
        subworldNames:
          - subworlds/baator/Baator_Malbolge
  # Renewable Element Geysers 
  # ---------------------------
  - names:
    - poi/Baator_Geyser_Methanetendrils
    listRule: TryAll
    priority: 370
    allowedCellsFilter:
      - command: Replace
        subworldNames:
          - subworlds/baator/Baator_Avernus
      - command: IntersectWith
        tagcommand: DistanceFromTag
        tag: AtStart
        minDistance: 1
        maxDistance: 7
  - names:
    - poi/Baator_Geyser_Swimmingpool
    listRule: TryAll
    priority: 360
    allowedCellsFilter:
      - command: Replace
        subworldNames:
          - subworlds/baator/Baator_Shadowfel
      - command: IntersectWith
        tagcommand: DistanceFromTag
        tag: AtStart
        minDistance: 1
        maxDistance: 10
  - names:
    - geysers/hot_hydrogen
    - geysers/molten_copper
    - expansion1::poi/poi_molten_gold_volcano
    listRule: TryAll
    priority: 350
    useRelaxedFiltering: true
    allowedCellsFilter:
      - command: Replace
        subworldNames:
          - subworlds/baator/Baator_Maladomini
  - names:
    - poi/Baator_Geyser_Dissulphurspout
    - expansion1::poi/poi_molten_aluminum_volcano
    - geysers/methane
    listRule: TryAll
    priority: 340
    allowedCellsFilter:
      - command: Replace
        subworldNames:
          - subworlds/baator/Baator_Dis

  # Undesirable Geysers
  # ---------------------------
  - names:
    - poi/Baator_Geyser_Caniaco2
    - poi/Baator_Geyser_Caniahypoxia
    listRule: TryOne
    priority: 200
    allowedCellsFilter:
      - command: Replace
        subworldNames:
          - subworlds/baator/Baator_Cania
  # Remaining Geysers
  - names: 
    - geysers/hot_po2
    - geysers/slimy_po2
    - geysers/hot_co2
    listRule: TryOne
    times: 3
    allowDuplicates: true
    priority: 100
    allowedCellsFilter:
      - command: Replace
        tagcommand: DistanceFromTag
        tag: AtStart
        minDistance: 3
        maxDistance: 10
      - command: ExceptWith
        zoneTypes: [ Space, FrozenWastes ]
  # ================================ 
  # - Points of interest - Generic Geysers
  # ================================ 
  #Change 'times' field to increase number of random Geysers
  #General requests from players
  - names:
    - geysers/generic
    listRule: TryOne
    times: 1
    ruleId: GenericGeysers
    allowDuplicates: true
    useRelaxedFiltering: true
    allowedCellsFilter:
      - command: Replace
        tagcommand: DistanceFromTag
        tag: AtStart
        minDistance: 4
        maxDistance: 10
      - command: ExceptWith
        zoneTypes: [ Space, FrozenWastes ]
  # ================================ 
  # - Points of interest - Other Geysers
  # ================================ 
  #Uncomment to enable End-game Geysers
  #niahoo's request
#  - names:
#    - expansion1::geysers/molten_niobium
#    listRule: GuaranteeAll
#    priority: 100
#    allowedCellsFilter:
#      - command: Replace
#        tagcommand: DistanceFromTag
#        tag: AtDepths
#        minDistance: 0
#        maxDistance: 2
#  - names:
#    - expansion1::geysers/molten_tungsten_compact
#    - expansion1::geysers/molten_tungsten_exposed
#    listRule: GuaranteeOne
#    priority: 100
#    allowedCellsFilter:
#      - command: Replace
#        subworldNames:
#          - subworlds/baator/Baator_Malbolge
